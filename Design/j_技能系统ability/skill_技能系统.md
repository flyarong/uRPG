# 技能系统

## 设计目的

- 技能系统（或称能力系统)是游戏核心玩法模块。游戏中的玩家行为大部分可以抽象为`技能`。
- 技能可以包括战斗技能和非战斗技能两类。
    - 战斗技能包括造成伤害、产生BUFF、产生法术场和产生子弹多种形式；
    - 非战斗技能是在非战斗状态下使用的，有时需要消耗道具，并能创造道具的一类技能；
- 普通攻击可以看作是一个特殊战斗技能

## 技能目标
- 实体目标：敌方角色或友方角色
- 点目标
- 区域目标
- 自身

## 施法条件

- 精力值：大部分法术需要消耗精力值
- 生命值：部分邪能技能和物理技能需要消耗饱食度
- 饱食度：大部分物理技能需要消耗饱食度
- 连击点数：部分技能的释放需要连击点数，部分技能释放奖励连击点数
- 道具：消耗指定数量的道具
- CD：技能CD和公共CD

## 吟唱

- 满足施法条件后，判断是否需要吟唱
- 大部分法术技能需要吟唱
- 吟唱过程可以打断（通过控制技能）
- 打断吟唱后一段时间内不能使用此法术（进入技能CD）

## 技能前摇

- 完成技能吟唱后，进入技能前摇动作
- 前摇动作完成时触发技能效果

## 技能生效

技能在完成前摇动作后立即生效，产生的技能效果暂定为如下几大类：
- 产生伤害：根据技能类型不同，伤害计算流程也不同，详见伤害系统文档
- 产生BUFF：BUFF（和DeBUFF）是指游戏中改变角色属性或状态的一个状态集合，详见BUFF系统文档
- 产生子弹：
- 产生法术场
- 产生道具
- 产生位移

## 技能后摇

- 技能效果触发后，进行技能后摇动作
- 技能后摇动作完成后，进入技能CD环节

## 技能CD

- 技能CD可以为空，就是无CD
- 技能在释放成功时进入技能CD
- 技能释放失败（吟唱被打断）时进入技能CD（时间是正常CD时间的20%）

## 公共CD

- 每次释放技能后都会进行公共CD
- 公共CD期间无法释放需要公共CD的技能